# Film Project

## Описание

Film Project — это приложение для работы с фильмами и актёрами в базе данных MySQL. Оно позволяет выполнять различные операции, такие как поиск фильмов по ключевым словам, жанрам и годам выпуска, а также ведение журнала запросов для отслеживания популярных запросов.

## Функциональность

- **Получение всех жанров:** Получение списка всех жанров из базы данных.
- **Поиск фильмов по ключевым словам:** Поиск фильмов по ключевым словам в заголовке и описании.
- **Поиск фильмов по жанру и году:** Поиск фильмов по указанному жанру и году выпуска.
- **Поиск по всем таблицам:** Поиск по ключевому слову в таблицах фильмов и актёров.
- **Логирование запросов:** Запись запросов в журнал с подсчётом количества повторений и отслеживанием популярности.

## Установка

1. **Клонируйте репозиторий:**

    ```bash
    git clone https://github.com/rubila341/film_project.git
    cd film_project
    ```

2. **Создайте виртуальное окружение (опционально):**

    ```bash
    python -m venv venv
    source venv/bin/activate  # На Windows используйте `venv\Scripts\activate`
    ```

3. **Установите зависимости:**

    Убедитесь, что у вас установлен пакет `mysql-connector-python`. Если нет, установите его с помощью pip:

    ```bash
    pip install mysql-connector-python
    ```


2. **Примеры использования:**

    - **Получение всех жанров:**

        Для получения всех жанров из базы данных используйте метод `get_all_genres`. Вот как это делается:

        ```python
        genres = db.get_all_genres()
        print(genres)
        ```

        Этот код вызовет метод `get_all_genres` объекта `db`, который вернёт список всех жанров. Затем результат будет напечатан на экран.

    - **Поиск фильмов по ключевому слову:**

        Чтобы найти фильмы по ключевому слову в заголовке и описании, используйте метод `search_by_keyword`. Пример:

        ```python
        films = db.search_by_keyword('action')
        print(films)
        ```

        Этот код выполнит поиск фильмов, содержащих слово "action" в заголовке или описании, и выведет найденные фильмы.

    - **Поиск фильмов по жанру и году:**

        Для поиска фильмов по определённому жанру и году выпуска используйте метод `search_by_genre_and_year`. Например:

        ```python
        films_by_genre_and_year = db.search_by_genre_and_year(genre='Action', year=2005)
        print(films_by_genre_and_year)
        ```

        Этот код найдёт фильмы жанра "Action", выпущенные в 2005 году, и выведет их на экран.

    - **Поиск по всем таблицам:**

        Если вам нужно выполнить поиск по ключевому слову в разных таблицах (например, фильмов и актёров), используйте метод `search_all_tables_by_keyword`:

        ```python
        search_results = db.search_all_tables_by_keyword('Bruce')
        print(search_results)
        ```

        Этот код найдет записи, содержащие слово "Bruce" в таблицах фильмов и актёров, и выведет результаты.

    - **Логирование запросов:**

        Для записи запросов в журнал используйте метод `log_query` объекта `logger`:

        ```python
        logger.log_query('SELECT * FROM film WHERE title LIKE %s')
        ```

        Этот код запишет запрос в журнал, а если такой запрос уже был, увеличит счётчик повторений.

    - **Получение популярных запросов:**

        Чтобы получить самые популярные запросы из журнала, используйте метод `get_popular_queries`:

        ```python
        popular_queries = logger.get_popular_queries()
        print(popular_queries)
        ```

        Этот код вернёт список самых популярных запросов, отсортированных по частоте использования.
